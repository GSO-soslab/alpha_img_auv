<?xml version="1.0"?>
<!--
    This file is part of ALPHA AUV project.

    Author: Emir Cem Gezer
    Email: emircem@uri.edu;emircem.gezer@gmail.com
    Year: 2022

    Copyright (C) 2022 Smart Ocean Systems Laboratory
-->
<launch>

    <arg name="robot_name" default="alpha_img"/>
    <arg name="delay" default="25.0" />

    <!--
        List of the simulated worlds in the 'world_of_stonefish'
    -->
    <!-- <arg name="scenario" default="ocean_img"/> -->
    <!-- <arg name="scenario" default="tank_img"/> -->
    <arg name="scenario" default="flat_terrain"/>

    <include file="$(find world_of_stonefish)/launch/simulation.launch">
        <arg name="robot_name" value="$(arg robot_name)"/>
        <arg name="scenario" value="$(arg scenario)"/>
    </include>

    <include file="$(find alpha_img_bringup)/launch/include/description.launch.xml">
        <arg name="robot_name" value="$(arg robot_name)"/>
    </include>

    <include file="$(find alpha_img_bringup)/launch/include/localization_sim.launch.xml">
        <arg name="robot_name" value="$(arg robot_name)"/>
        <arg name="is_sim" value="true"/>
    </include>

    <include file="$(find alpha_img_bringup)/launch/include/control.launch.xml">
        <arg name="robot_name" value="$(arg robot_name)"/>
        <arg name="is_sim" value="true"/>
    </include>
    
    <include file="$(find alpha_img_bringup)/launch/bringup_helm.launch">
        <arg name="robot_name" value="$(arg robot_name)"/>
    </include>

    <include file="$(find alpha_img_bringup)/launch/include/joystick.launch.xml">
        <arg name="robot_name" value="$(arg robot_name)"/>
    </include>
    
    <node pkg="rviz" type="rviz" name="rviz" 
          args="-d $(find alpha_img_description)/rviz/config.rviz"
          launch-prefix="bash -c 'sleep $(arg delay); $0 $@'" />

    <node name="rqt_gui" pkg="rqt_gui" type="rqt_gui" 
          args="--perspective-file $(find alpha_img_description)/rqt/default.perspective"
          launch-prefix="bash -c 'sleep $(arg delay); $0 $@'" />

</launch>
